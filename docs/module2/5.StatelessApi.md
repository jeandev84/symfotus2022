### Stateless API


1. Цель
```
Реализовать stateless API с аутентификацей и авторизацей
Использовать JWT для аутентификации и авторизации
```

2. Stateless API
```
Сервер не хранит информацию о состоянии приложения (например, сессию)
Каждый запрос изолирован от других
Не путаем состояние приложения и состояние ресурса
- Состояние приложения - это контекст исполнения, история запросов, информация о клиенте
- Состояние ресурса не заваист от взаимодействия с клиентом

===================================================================================================
Примучества
===================================================================================================

- Горизонтальное масштабирование
- Отсуствие необходимости синхронизации состояния приложения между бэкендом и фронтендом
- Простота реализации микросервисной архитектуры
- Кэширование
- Состояние клента можно определить по запросу

==================================================================================================
Нельзя при использовании подход Stateless API !!!
==================================================================================================

- Нельзя использовать сессии
- Хранить контекст на сервере ( например, залогинен ли пользователь )
- Использовать историю действий пользователя в бизнесс-логике


==================================================================================================
Можно при использовании подход Stateless API !!!
==================================================================================================

- Использовать куки
- Хранить контекст на клиенте и передавать его в запросах
- Использовать историю изменений ресурсов в бизнесс-логике

```

3. Stateless аутентификация
```
Запрос на получение токена с basic auth
(basic auth - передаем токен в headers)
Токен используется в bearer auth
Объязательно устанавливаем режим stateless в firewall, иначе придётся реализовывать UserProvider
```


4. Install JWT Packages
```
composer require lexik/jwt-authentication-bundle
```


5. Generate JWT config
```
openssl genrsa -out config/jwt/private.pem -aes256 4096
openssl rsa -pubout -in config/jwt/private.pem -out config/jwt/public.pem
sudo chmod 777 config/jwt -R
sudo chmod 777 config/packages/lexik_jwt_authentication.yaml
```